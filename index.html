<!doctype html>
<html lang="ta">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>ZeroTrace — Mock UI</title>
  <style>
    :root{
      --bg:#222226;
      --card:#2b2c2f;
      --muted:#9aa0a6;
      --accent:#dfe3e6;
      --glass: rgba(255,255,255,0.03);
      --radius:20px;
      --pad:20px;
      font-family: Inter, Roboto, system-ui, -apple-system, "Segoe UI", "Noto Sans", "Helvetica Neue", Arial;
    }
    html,body{height:100%;}
    body{
      margin:0; background:linear-gradient(180deg,#f7f7f8 0%, #efefef 100%); display:flex; align-items:center; justify-content:center; padding:40px;
    }
    .gallery{display:flex; gap:20px; max-width:1200px;}
    .screen{
      width:240px; height:680px; background:var(--bg); color:var(--accent); border-radius:28px; padding:26px; box-sizing:border-box; display:flex; flex-direction:column; justify-content:space-between; box-shadow:0 6px 20px rgba(0,0,0,0.25);
    }
    .topbar{display:flex; align-items:center; gap:8px;}
    .logo{width:34px; height:34px; border-radius:50%; border:2px solid rgba(255,255,255,0.08); display:flex; align-items:center; justify-content:center; font-weight:700;}
    h1{font-size:22px; margin:26px 0 12px; font-weight:600;}
    .muted{color:var(--muted); font-size:14px;}

    /* Selection screen */
    .device-grid{display:flex; gap:12px; margin-top:18px}
    .device{flex:1; background:var(--card); padding:18px; border-radius:12px; text-align:center; box-shadow:inset 0 -2px 0 rgba(255,255,255,0.02); cursor:pointer; transition:transform .12s ease, box-shadow .12s ease}
    .device.selected{outline:2px solid rgba(120,180,255,0.06); transform:translateY(-4px); box-shadow:0 8px 20px rgba(0,0,0,0.4)}
    .device .size{color:var(--muted); margin-top:12px}
    .status{display:flex; align-items:center; gap:8px; margin-top:18px}
    .dot{width:12px;height:12px;border-radius:50%;background:#2ecc71}
    .btn{background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(0,0,0,0.05)); border-radius:12px; padding:14px; text-align:center; color:var(--accent); font-weight:600; cursor:pointer; border:0}

    /* Confirm screen */
    .warning{background:var(--card); padding:18px; border-radius:12px; text-align:center}
    .warn-ico{font-size:44px; opacity:0.86}

    /* Progress */
    .progress-wrap{text-align:center}
    .bar{height:16px; background:rgba(255,255,255,0.06); border-radius:12px; width:100%; margin:18px 0; overflow:hidden}
    .bar > i{display:block; height:100%; background:linear-gradient(90deg,#e6e9ec,#cfd6db); width:0%; border-radius:12px}
    .small{font-size:14px}

    /* Completion */
    .check{width:84px;height:84px;border-radius:50%;border:4px solid rgba(255,255,255,0.06);display:flex;align-items:center;justify-content:center;margin:0 auto}
    .controls{display:flex; gap:12px; flex-direction:column}

    footer{font-size:12px;color:var(--muted); text-align:center}

    /* Responsive */
    @media (max-width:1100px){.gallery{flex-wrap:wrap; justify-content:center}}
    @media (max-width:520px){.screen{width:320px}}
  </style>
</head>
<body>
  <div class="gallery" id="app">

    <!-- Screen 1: Select -->
    <div class="screen" id="screen-select">
      <div>
        <div class="topbar"><div class="logo">Z</div><div style="font-weight:600">ZeroTrace</div></div>
        <h1>Select a device<br>to wipe</h1>
        <div class="device-grid">
          <div class="device" data-name="Internal SSD" data-size="500 GB">
            <div style="font-weight:700">Internal<br>SSD</div>
            <div class="size">500 GB</div>
          </div>
          <div class="device" data-name="USB Drive" data-size="64 GB">
            <div style="font-weight:700">USB<br>Drive</div>
            <div class="size">64 GB</div>
          </div>
        </div>
        <div class="status"><div class="dot"></div><div class="muted">Connected & Ready</div></div>
      </div>
      <div>
        <button class="btn" id="scanBtn">Scan Again</button>
      </div>
    </div>

    <!-- Screen 2: Confirm -->
    <div class="screen" id="screen-confirm">
      <div>
        <div class="topbar"><div class="logo">Z</div><div style="font-weight:600">ZeroTrace</div></div>
        <div class="warning">
          <div class="warn-ico">⚠️</div>
          <div style="margin-top:12px; font-weight:600; font-size:18px">This action will<br>permanently erase<br>all data on:</div>
          <div class="muted" id="confirm-target" style="margin-top:12px">[Device Name, Size]</div>
        </div>
      </div>
      <div>
        <button class="btn" id="confirmBtn">Confirm & Wipe</button>
      </div>
    </div>

    <!-- Screen 3: Progress -->
    <div class="screen" id="screen-progress">
      <div class="progress-wrap">
        <div class="topbar"><div class="logo">Z</div><div style="font-weight:600">ZeroTrace</div></div>
        <h1>Secure Erase<br>in Progress…</h1>
        <div class="bar"><i id="progressFill"></i></div>
        <div style="font-weight:700; font-size:18px" id="progressPct">0%</div>
        <div style="margin-top:18px" class="small muted">Method: NIST 800-33 3-pass</div>
        <div class="small muted" id="eta">Estimated time: —</div>
      </div>
      <div>
        <button class="btn" id="viewLogs">View Logs</button>
      </div>
    </div>

    <!-- Screen 4: Completed -->
    <div class="screen" id="screen-complete">
      <div>
        <div class="topbar"><div class="logo">Z</div><div style="font-weight:600">ZeroTrace</div></div>
        <div class="check">✅</div>
        <h1 style="text-align:center">Wipe Completed<br>Securely</h1>
        <div style="text-align:center; margin-top:12px">
          <div class="muted">Certificate ID:</div>
          <div style="font-weight:700; margin-top:6px" id="certId">ZT-2026-09-12345</div>
          <div class="muted" style="margin-top:8px">SHA-256 Hash</div>
          <div class="muted" id="shaVal" style="word-break:break-all; margin-top:6px">—</div>
        </div>
      </div>
      <div class="controls">
        <button class="btn" id="downloadPdf">Download PDF</button>
        <button class="btn" id="downloadJson">Download JSON</button>
        <button class="btn" id="shareQr">Share QR</button>
      </div>
    </div>

  </div>

  <!-- jsPDF for PDF download (CDN) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script>
    // Simple interactive behavior to mimic flow
    const devices = document.querySelectorAll('.device');
    let selected = null;
    devices.forEach(d => d.addEventListener('click', ()=>{
      devices.forEach(x=>x.classList.remove('selected'));
      d.classList.add('selected');
      selected = {name:d.dataset.name, size:d.dataset.size};
      document.getElementById('confirm-target').textContent = `${selected.name} — ${selected.size}`;
    }));

    document.getElementById('confirmBtn').addEventListener('click', ()=>{
      if(!selected){ alert('Please select a device first.'); return; }
      // show progress screen
      document.getElementById('screen-progress').scrollIntoView({behavior:'smooth'});
      startWipe();
    });

    // Progress simulation
    const fill = document.getElementById('progressFill');
    const pct = document.getElementById('progressPct');
    const eta = document.getElementById('eta');
    const certIdEl = document.getElementById('certId');
    const shaValEl = document.getElementById('shaVal');

    async function startWipe(){
      // simple simulation that takes ~8s
      let progress = 0;
      const total = 45; // start to 45% then finish later (to mimic provided screenshot)
      const start = Date.now();
      eta.textContent = 'Estimated time: 6 min';
      const interval = setInterval(()=>{
        progress += Math.random()*6; // variable speed
        if(progress >= total){ progress = total; clearInterval(interval); }
        updateProgress(Math.round(progress));
        if(progress===total){
          // continue to completion after short pause
          setTimeout(()=>simulateCompletion(),800);
        }
      },300);
    }
    function updateProgress(v){
      fill.style.width = v + '%';
      pct.textContent = v + '%';
    }
    async function simulateCompletion(){
      // quickly go to 100
      for(let i=46;i<=100;i+=2){ updateProgress(i); await wait(40);} 
      // generate certificate
      const id = generateCertId();
      certIdEl.textContent = id;
      const sha = await sha256Hex(id);
      shaValEl.textContent = sha;
      // scroll to complete screen
      document.getElementById('screen-complete').scrollIntoView({behavior:'smooth'});
    }
    function wait(ms){return new Promise(r=>setTimeout(r,ms));}
    function generateCertId(){
      const dt = new Date();
      const year = dt.getFullYear();
      const month = String(dt.getMonth()+1).padStart(2,'0');
      const day = String(dt.getDate()).padStart(2,'0');
      const rnd = Math.floor(Math.random()*90000)+10000;
      return `ZT-${year}-${month}-${day}-${rnd}`;
    }

    // SHA-256 helper
    async function sha256Hex(text){
      const enc = new TextEncoder();
      const data = enc.encode(text);
      const hashBuffer = await crypto.subtle.digest('SHA-256', data);
      const hashArray = Array.from(new Uint8Array(hashBuffer));
      const hashHex = hashArray.map(b=>b.toString(16).padStart(2,'0')).join('');
      return hashHex;
    }

    // Download JSON
    document.getElementById('downloadJson').addEventListener('click', ()=>{
      const payload = {
        certificate: certIdEl.textContent,
        sha256: shaValEl.textContent,
        method: 'NIST 800-33 3-pass',
        device: selected || {name:null,size:null},
        timestamp: new Date().toISOString()
      };
      const blob = new Blob([JSON.stringify(payload, null, 2)], {type:'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href = url; a.download = `${payload.certificate || 'ZT-certificate'}.json`; a.click(); URL.revokeObjectURL(url);
    });

    // Download PDF using jsPDF
    document.getElementById('downloadPdf').addEventListener('click', async ()=>{
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF({unit:'pt', format:'a4'});
      doc.setFontSize(18);
      doc.text('ZeroTrace — Wipe Certificate', 40, 60);
      doc.setFontSize(12);
      doc.text(`Certificate ID: ${certIdEl.textContent}`, 40, 100);
      doc.text(`Device: ${selected ? selected.name + ' ('+selected.size+')' : '—'}`, 40, 120);
      doc.text(`Method: NIST 800-33 3-pass`, 40, 140);
      doc.text(`SHA-256: ${shaValEl.textContent}`, 40, 160);
      doc.text(`Timestamp: ${new Date().toLocaleString()}`, 40, 180);
      doc.save(`${certIdEl.textContent || 'ZT-certificate'}.pdf`);
    });

    // Simple Share QR — fallback: copy certificate to clipboard
    document.getElementById('shareQr').addEventListener('click', async ()=>{
      const text = `Certificate: ${certIdEl.textContent}\nSHA-256: ${shaValEl.textContent}`;
      if(navigator.share){
        try{ await navigator.share({title:'ZeroTrace Certificate', text}); }catch(e){ alert('Share canceled'); }
      } else {
        try{ await navigator.clipboard.writeText(text); alert('Certificate copied to clipboard'); }catch(e){ alert('Could not access clipboard'); }
      }
    });

    // small: show initial screen scroll center
    document.getElementById('screen-select').scrollIntoView();
  </script>
</body>
</html>